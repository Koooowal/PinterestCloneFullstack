import{j as e,L as u,I as t,b as i,d as m,R as f,e as p}from"./index-Bcx3K_Zg.js";import{G as h}from"./gallery-Dsv83GMG.js";import{a as c,u as g}from"./useMutation-Cb9_Gka5.js";import{f as x}from"./index-BojVbZw0.js";import"./useBaseQuery-OIqdThTs.js";function j({userId:r}){const{isPending:n,data:a,error:o}=c({queryKey:["boards",r],queryFn:()=>i.get(`/boards/${r}`).then(s=>s.data)});return n?"Loading...":o?"An error has occurred: "+o.message:a?e.jsx("div",{className:"collections",children:a==null?void 0:a.map(s=>e.jsxs(u,{to:`/search?boardId=${s._id}`,className:"collection",children:[e.jsx(t,{path:s.firstPin.media,alt:""}),e.jsxs("div",{className:"collectionInfo",children:[e.jsx("h1",{children:s.title}),e.jsxs("span",{children:[s.pinCount," Pins Â· ",x(s.createdAt)]})]})]},s._id))}):"User not found!"}const v=async r=>(console.log(r),(await i.post(`/users/follow/${r}`)).data),y=({isFollowing:r,username:n})=>{const a=m(),o=g({mutationFn:v,onSuccess:()=>{a.invalidateQueries({queryKey:["profile",n]})}});return e.jsx("button",{onClick:()=>o.mutate(n),disabled:o.isPending,children:r?"Unfollow":"Follow"})};function F(){const[r,n]=f.useState("saved"),{username:a}=p(),{isPending:o,data:s,error:l}=c({queryKey:["pin",a],queryFn:()=>i.get(`/users/${a}`).then(d=>d.data)});return o?"Loading...":l?"An error has occurred: "+l.message:s?e.jsxs("div",{className:"profilePage",children:[e.jsx(t,{src:s.img?s.img:void 0,path:s.img?void 0:"/general/noAvatar.png",alt:""}),e.jsx("h1",{className:"profileName",children:s.displayName}),e.jsxs("span",{className:"profileUsername",children:["@",s.userName]}),e.jsxs("div",{className:"followCounts",children:[s.followerCount," followers - ",s.followingCount," followed"]}),e.jsxs("div",{className:"profileInteractions",children:[e.jsx(t,{path:"/general/share.svg",alt:""}),e.jsxs("div",{className:"profileButtons",children:[e.jsx("button",{children:"Message"}),e.jsx(y,{isFollowing:s.isFollowing,username:s.userName})]}),e.jsx(t,{path:"/general/more.svg",alt:""})]}),e.jsxs("div",{className:"profileOptions",children:[e.jsx("span",{onClick:()=>n("created"),className:r==="created"?"active":"",children:"Created"}),e.jsx("span",{onClick:()=>n("saved"),className:r==="saved"?"active":"",children:"Saved"})]}),r==="created"?e.jsx(h,{userId:s._id}):e.jsx(j,{userId:s._id})]}):"User not found!"}export{F as default};
